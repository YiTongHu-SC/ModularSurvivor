﻿# UI - 用户界面系统

## 概述
管理游戏的所有用户界面显示和交互，采用事件驱动的数据更新模式。提供游戏内状态显示、菜单导航等完整的UI体验。

## 系统架构

### Game/ - 游戏内UI
- **HeroHpBar**：英雄血条显示组件
  - 实时显示玩家生命值变化
  - 支持平滑的血量动画效果
  - 响应战斗系统的伤害事件

- **游戏状态显示**：
  - 当前波次信息展示
  - 敌人剩余数量统计
  - 游戏时间和得分显示
  - 技能冷却和状态指示器

### Menus/ - 菜单界面
- **主菜单系统**：
  - 游戏开始/继续选项
  - 设置和选项界面
  - 退出游戏功能

- **暂停菜单**：
  - 游戏暂停/恢复控制
  - 快速设置调整
  - 返回主菜单选项

## 核心特性

### 事件驱动更新
- **实时响应**：UI组件自动响应游戏状态变化
- **松耦合设计**：UI与游戏逻辑通过事件系统通信
- **性能优化**：只在数据变化时更新UI元素

### 响应式布局
- **多分辨率适配**：支持不同屏幕尺寸和比例
- **动态缩放**：根据设备性能调整UI复杂度
- **安全区域处理**：适配不同设备的显示区域

### 数据绑定机制
- **自动更新**：UI数据与游戏状态自动同步
- **类型安全**：强类型的数据绑定减少错误
- **单向绑定**：简化数据流向，避免循环依赖

### 动画和特效
- **平滑过渡**：UI状态变化使用动画过渡
- **视觉反馈**：用户操作提供即时视觉响应
- **性能友好**：动画系统针对移动设备优化

## 设计特色

### 模块化组件
- **独立组件**：每个UI功能封装为独立组件
- **可复用设计**：通用UI组件支持多处复用
- **配置驱动**：UI布局和样式支持外部配置

### 国际化支持
- **多语言准备**：UI文本支持国际化框架
- **动态切换**：运行时可切换语言设置
- **本地化适配**：支持不同地区的显示习惯

### 调试和测试
- **可视化调试**：提供UI状态的可视化调试工具
- **模拟数据**：支持使用模拟数据测试UI
- **性能监控**：UI性能指标的实时监控

## 技术实现

### UI框架选择
- **Unity UGUI**：使用Unity内置UI系统
- **Canvas分层**：合理的Canvas层级管理
- **事件系统**：集成Unity EventSystem

### 数据流架构
```csharp
// UI数据更新流程
GameState -> Event -> UIController -> UIView -> Display
```

### 组件生命周期
- **初始化阶段**：注册事件监听，设置初始状态
- **运行阶段**：响应事件更新，处理用户交互
- **销毁阶段**：清理事件监听，释放资源

## 已实现功能

### 基础显示组件
- **血量条系统**：支持平滑动画的生命值显示
- **数值显示**：游戏内各种数值的格式化显示
- **状态指示器**：Buff状态、技能冷却等指示

### 交互组件
- **按钮系统**：标准化的按钮交互和反馈
- **输入处理**：与输入系统集成的UI交互
- **导航系统**：键盘和手柄的UI导航支持

## 使用示例

```csharp
// 更新血量显示
public class HeroHpBar : MonoBehaviour
{
    private void OnEnable()
    {
        EventManager.Subscribe<DamageEvent>(OnDamageReceived);
    }
    
    private void OnDamageReceived(DamageEvent damageEvent)
    {
        UpdateHealthBar(damageEvent.NewHealth);
    }
}
```

## Demo-V1阶段重点

### 核心显示需求
- **玩家状态**：血量、等级、经验值显示
- **战斗信息**：当前波次、敌人数量、游戏时间
- **简化交互**：基础的暂停和设置功能

### 优先级排序
1. 血量条和基础状态显示
2. 波次信息和敌人计数
3. 游戏时间和简单统计
4. 暂停菜单和基础设置

## 扩展指导

### 添加新的UI组件
1. 继承合适的基础UI类
2. 实现必要的事件监听接口
3. 配置合适的Canvas层级和排序
4. 添加必要的动画和过渡效果

### UI性能优化
- **Canvas优化**：合理分组减少重绘
- **对象池**：重复使用的UI元素使用对象池
- **懒加载**：按需加载复杂的UI界面
- **批量更新**：避免频繁的单个UI元素更新

### 集成其他系统
- **输入系统**：响应玩家的UI操作输入
- **音效系统**：UI操作的音效反馈
- **存档系统**：UI设置的持久化保存
- 基本的调试信息显示
